{"remainingRequest":"/Users/wanmenghui/Desktop/base_project/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/wanmenghui/Desktop/base_project/src/components/Email.vue?vue&type=style&index=0&lang=css&","dependencies":[{"path":"/Users/wanmenghui/Desktop/base_project/src/components/Email.vue","mtime":1657704494757},{"path":"/Users/wanmenghui/Desktop/base_project/node_modules/css-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wanmenghui/Desktop/base_project/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/wanmenghui/Desktop/base_project/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/wanmenghui/Desktop/base_project/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/wanmenghui/Desktop/base_project/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKLm5hdmlnYXRpb24gewogICAgbWFyZ2luOiAxMCUgYXV0byA1MHB4IGF1dG87CiAgICBwYWRkaW5nLWxlZnQ6IDMwJTsKICAKfQo="},{"version":3,"sources":["Email.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;;AAEA","file":"Email.vue","sourceRoot":"src/components","sourcesContent":["<template>\n\n    <div class=\"navigation\">\n        <el-steps :space=\"200\" :active=\"active\" finish-status=\"success\" align-center=\"true\" style=\"margin-bottom: 50px;\">\n            <el-step title=\"载入页面\"></el-step>\n            <el-step title=\"邮箱填写\" :status=\"fillStatus\"></el-step>\n            <el-step title=\"邮件发送\" :status=\"sendStaus\"></el-step>\n        </el-steps>\n\n        <div>\n            <el-input\n            placeholder=\"请输入邮箱\"\n            v-model=\"email\"\n            clearable\n            :disabled=\"isEdit\"\n            prefix-icon=\"el-icon-receiving\"\n            style=\"width: 32%; margin-left: 6%\">\n            </el-input>\n        </div>\n        <div style=\"margin-top: 50px; margin-left: 6%\">\n            <el-button type=\"success\" icon=\"el-icon-caret-left\" @click=\"previouStep\">上一步</el-button>\n            <el-button type=\"success\" icon=\"el-icon-caret-right\" @click=\"forgetPassword\" v-if=\"isNext\" style=\"margin-left: 19%\">下一步</el-button>\n        </div>\n    </div>   \n</template>\n\n<script>\n\nexport default {\n  name: 'Email',\n  data() {\n    return {\n      email: \"\",//邮箱内容\n      isEdit: false,//设置输入框能否编辑\n      active: 1,//当前处于哪个流程\n      fillStatus: \"finish\",//设置状态\n      sendStaus: \"wait\",\n      isNext: true//控制下一步 是否先手\n    }\n  },\n  methods: {\n      //上一步按钮执行方法，到达最前，则直接返回到登录页\n      previouStep: function() {  \n          if(this.active == 1) {\n            this.$router.replace({path: '/login'});//跳转到登录页\n          }else if(this.active == 2) {\n            this.active--;\n            this.isEdit = false;\n            this.isNext = true;\n            this.fillStatus = \"finish\";\n            this.sendStaus = \"wait\";\n          }      \n      },\n      forgetPassword: function(){\n        //邮箱必输，不然不然下一步\n        if(this.email == \"\") {\n            this.$message.error('邮箱未填写');\n            return;\n        }\n        //根据所处流程判断是否发送请求\n        if(this.active <= 1) {\n            this.active++;\n            this.fillStatus = \"success\";\n            this.sendStaus = \"finish\";\n            this.isEdit = true;//邮箱输入框设置为不可编辑\n        }else if(this.active == 2) {         \n            this.axios({\n                url: '/forgetPassword',   \n                method: 'post',      \n                data: {              \n                    email: this.email\n                }\n            }).then(res=>{\n                //请求成功，则改变流程状态，显示提示信息,隐藏下一步按钮，若根据邮箱查不到信息，则直接抛出错误提示\n                debugger;\n                let data = res.data;\n                this.isNext = false;\n                if(data.success) {\n                    this.$message({\n                        message: data.tip,\n                        type: 'success'\n                    });\n                    this.sendStaus = \"success\";\n                }else if(data.message != \"\") {\n                    this.sendStaus = \"error\";\n                    this.$message.error(data.message);\n                }\n            }).catch(()=>{\n                this.sendStaus = \"error\";\n                this.$message.error('请求发送失败');\n            })\n\n        }\n      }\n  }\n}\n</script>\n\n<style>\n    .navigation {\n        margin: 10% auto 50px auto;\n        padding-left: 30%;\n      \n    }\n</style>"]}]}